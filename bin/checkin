#!/usr/bin/env perl

use Modern::Perl;

use App::Checkin;
my $checkin = App::Checkin->new;

checkin();
#get_status();

sub checkin {
    $checkin->checkin or do {
        say "checkin entry exists, overwrite? [Y/n]";
        chomp (my $input = <STDIN>);
        $checkin->update_checkin if $input =~ /^y$/i or $input eq '';
    };
    say 'Checked in at ' . DateTime->now .
        ', Have a good day'
}

sub get_status {
    my $status = $checkin->get_checkin_status();
    if (!$status) { #no checkin
        say "no checkin data, please update";
    } elsif ($status < 9) {
        say "less than 9 hours since checking, checkout anyway?"
    }
}

sub checkout {
    say $checkin->checkout;
}
